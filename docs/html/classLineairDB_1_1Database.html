<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LineairDB: LineairDB::Database Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LineairDB
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classLineairDB_1_1Database.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classLineairDB_1_1Database-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">LineairDB::Database Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="database_8h_source.html">database.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a2bc7a5c80f83314de97efd25a59409a0"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#a2bc7a5c80f83314de97efd25a59409a0">ProcedureType</a> = std::function&lt; void(<a class="el" href="classLineairDB_1_1Transaction.html">Transaction</a> &amp;)&gt;</td></tr>
<tr class="separator:a2bc7a5c80f83314de97efd25a59409a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38efc92beb0118c691946019de77c9ea"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#a38efc92beb0118c691946019de77c9ea">CallbackType</a> = std::function&lt; void(const <a class="el" href="namespaceLineairDB.html#a4f1bbaf1231308bbcb015d600f21a881">TxStatus</a>)&gt;</td></tr>
<tr class="separator:a38efc92beb0118c691946019de77c9ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af5b85283761f6a9d34870f0615f16c82"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#af5b85283761f6a9d34870f0615f16c82">Database</a> () noexcept</td></tr>
<tr class="memdesc:af5b85283761f6a9d34870f0615f16c82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new <a class="el" href="classLineairDB_1_1Database.html">Database</a> object. Thread-safe. Note that a default-constructed <a class="el" href="structLineairDB_1_1Config.html" title="Configuration and options for LineairDB instances. ">Config</a> object will be passed.  <a href="#af5b85283761f6a9d34870f0615f16c82">More...</a><br /></td></tr>
<tr class="separator:af5b85283761f6a9d34870f0615f16c82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7e29bead61d159e6bc7719f4ad8d886"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#ab7e29bead61d159e6bc7719f4ad8d886">Database</a> (const <a class="el" href="structLineairDB_1_1Config.html">Config</a> &amp;config) noexcept</td></tr>
<tr class="memdesc:ab7e29bead61d159e6bc7719f4ad8d886"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new <a class="el" href="classLineairDB_1_1Database.html">Database</a> object. Thread-safe.  <a href="#ab7e29bead61d159e6bc7719f4ad8d886">More...</a><br /></td></tr>
<tr class="separator:ab7e29bead61d159e6bc7719f4ad8d886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f2b5961597dbbbf87f6454254fb9581"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#a4f2b5961597dbbbf87f6454254fb9581">~Database</a> () noexcept</td></tr>
<tr class="separator:a4f2b5961597dbbbf87f6454254fb9581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a336be005045caa9896820560f7109df0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#a336be005045caa9896820560f7109df0">Database</a> (const <a class="el" href="classLineairDB_1_1Database.html">Database</a> &amp;)=delete</td></tr>
<tr class="separator:a336be005045caa9896820560f7109df0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3efa30ddbfacfd33270d483072b19acc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLineairDB_1_1Database.html">Database</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#a3efa30ddbfacfd33270d483072b19acc">operator=</a> (const <a class="el" href="classLineairDB_1_1Database.html">Database</a> &amp;)=delete</td></tr>
<tr class="separator:a3efa30ddbfacfd33270d483072b19acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03fb644108b1ab1631aeaaf72172bad1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#a03fb644108b1ab1631aeaaf72172bad1">Database</a> (<a class="el" href="classLineairDB_1_1Database.html">Database</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a03fb644108b1ab1631aeaaf72172bad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc96bcc93a7c68b30784e36e9aa4198d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLineairDB_1_1Database.html">Database</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#afc96bcc93a7c68b30784e36e9aa4198d">operator=</a> (<a class="el" href="classLineairDB_1_1Database.html">Database</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:afc96bcc93a7c68b30784e36e9aa4198d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd848da7f5cef8d50105ef380d4bac6d"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structLineairDB_1_1Config.html">Config</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#abd848da7f5cef8d50105ef380d4bac6d">GetConfig</a> () const noexcept</td></tr>
<tr class="memdesc:abd848da7f5cef8d50105ef380d4bac6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the <a class="el" href="structLineairDB_1_1Config.html" title="Configuration and options for LineairDB instances. ">Config</a> object set by constructor.  <a href="#abd848da7f5cef8d50105ef380d4bac6d">More...</a><br /></td></tr>
<tr class="separator:abd848da7f5cef8d50105ef380d4bac6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5f105cc3014c7e5b5e2ec5a1815d536"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#af5f105cc3014c7e5b5e2ec5a1815d536">ExecuteTransaction</a> (<a class="el" href="classLineairDB_1_1Database.html#a2bc7a5c80f83314de97efd25a59409a0">ProcedureType</a> proc, <a class="el" href="classLineairDB_1_1Database.html#a38efc92beb0118c691946019de77c9ea">CallbackType</a> commit_clbk, std::optional&lt; <a class="el" href="classLineairDB_1_1Database.html#a38efc92beb0118c691946019de77c9ea">CallbackType</a> &gt; precommit_clbk=std::nullopt)</td></tr>
<tr class="memdesc:af5f105cc3014c7e5b5e2ec5a1815d536"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes a transaction given by a transaction procedure proc, and afterwards process callback function with the resulting TxStatus. It enqueues these two functions into <a class="el" href="namespaceLineairDB.html">LineairDB</a>'s thread pool. Thread-safe.  <a href="#af5f105cc3014c7e5b5e2ec5a1815d536">More...</a><br /></td></tr>
<tr class="separator:af5f105cc3014c7e5b5e2ec5a1815d536"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdd2606ae46302941e64f1cb083f5747"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLineairDB_1_1Transaction.html">Transaction</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#afdd2606ae46302941e64f1cb083f5747">BeginTransaction</a> ()</td></tr>
<tr class="memdesc:afdd2606ae46302941e64f1cb083f5747"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new transaction. Via this interface, the callee thread of this method can manipulate <a class="el" href="namespaceLineairDB.html">LineairDB</a>'s key-value storage directly. Note that the behavior and performance characteristics will affect from the selected callback manager and log manager; For example, if you have set Config::CallbackManager to ThreadLocal, the callee thread of this method may have to call Database::RequestCommit more frequently, in order to resolve the congestion of the thread-local commit callback queue.  <a href="#afdd2606ae46302941e64f1cb083f5747">More...</a><br /></td></tr>
<tr class="separator:afdd2606ae46302941e64f1cb083f5747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3090d3016716a1f1def8357ca7dd94d8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#a3090d3016716a1f1def8357ca7dd94d8">EndTransaction</a> (<a class="el" href="classLineairDB_1_1Transaction.html">Transaction</a> &amp;tx, <a class="el" href="classLineairDB_1_1Database.html#a38efc92beb0118c691946019de77c9ea">CallbackType</a> clbk)</td></tr>
<tr class="memdesc:a3090d3016716a1f1def8357ca7dd94d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminates the transaction. If <a class="el" href="classLineairDB_1_1Transaction.html#a85c9aa49f58d72bcbc13d4a1ea9e3a38" title="Abort this transaction manually. ">Transaction::Abort</a> has not been called, <a class="el" href="namespaceLineairDB.html">LineairDB</a> tries to commit <code>tx</code>.  <a href="#a3090d3016716a1f1def8357ca7dd94d8">More...</a><br /></td></tr>
<tr class="separator:a3090d3016716a1f1def8357ca7dd94d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad41349e9df9ad939de6d77e7b69dc469"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#ad41349e9df9ad939de6d77e7b69dc469">Fence</a> () const noexcept</td></tr>
<tr class="memdesc:ad41349e9df9ad939de6d77e7b69dc469"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classLineairDB_1_1Database.html#ad41349e9df9ad939de6d77e7b69dc469" title="Fence() waits termination of transactions which is currently in progress. You can execute transaction...">Fence()</a> waits termination of transactions which is currently in progress. You can execute transactions in the order you want by interleaving <a class="el" href="classLineairDB_1_1Database.html#ad41349e9df9ad939de6d77e7b69dc469" title="Fence() waits termination of transactions which is currently in progress. You can execute transaction...">Fence()</a> between ExecuteTransaction functions. Note that no <a class="el" href="classLineairDB_1_1Database.html#ad41349e9df9ad939de6d77e7b69dc469" title="Fence() waits termination of transactions which is currently in progress. You can execute transaction...">Fence()</a> call may result in a execution sequence which is not same as the program (invoking) order of the ExecuteTransaction functions. If you know some dependency of transactions (e.g., database population), use this method to order them. Thread-safe.  <a href="#ad41349e9df9ad939de6d77e7b69dc469">More...</a><br /></td></tr>
<tr class="separator:ad41349e9df9ad939de6d77e7b69dc469"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abff04164aad657e2b72100885d699e38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#abff04164aad657e2b72100885d699e38">WaitForCheckpoint</a> () const noexcept</td></tr>
<tr class="memdesc:abff04164aad657e2b72100885d699e38"><td class="mdescLeft">&#160;</td><td class="mdescRight">WaitForCheckpoint Waits for the completion of the next checkpoint. Note that this method may take longer than the time specified in <code><a class="el" href="structLineairDB_1_1Config.html#a9dc0559305ed0a5d88d26367f1239809" title="It uses as the interval time (seconds) for checkpointing. The longer is the better for the performanc...">LineairDB::Config.checkpoint_period</a> (default value: 30 seconds)</code> in the worst cases. When the WAL (logging) is disabled and durability is guaranteed by only checkpointing, this interface is preferable; it ensures that the currently active transactions are durable.  <a href="#abff04164aad657e2b72100885d699e38">More...</a><br /></td></tr>
<tr class="separator:abff04164aad657e2b72100885d699e38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad71b1f7a86e96639030d37fed9b7695"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#aad71b1f7a86e96639030d37fed9b7695">RequestCallbacks</a> ()</td></tr>
<tr class="memdesc:aad71b1f7a86e96639030d37fed9b7695"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests executions of callback functions of already completed (committed or (aborted) transactions. Note that <a class="el" href="namespaceLineairDB.html">LineairDB</a>'s callback queues may be overloading in some combination of configurations (e.g., too long epoch size, too small thread-pool size, or weird implementation of the selected CallbackManager).  <a href="#aad71b1f7a86e96639030d37fed9b7695">More...</a><br /></td></tr>
<tr class="separator:aad71b1f7a86e96639030d37fed9b7695"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a49982aa325e19f0956d42fde9132caa2"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLineairDB_1_1Database.html#a49982aa325e19f0956d42fde9132caa2">Transaction</a></td></tr>
<tr class="separator:a49982aa325e19f0956d42fde9132caa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a38efc92beb0118c691946019de77c9ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38efc92beb0118c691946019de77c9ea">&#9670;&nbsp;</a></span>CallbackType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classLineairDB_1_1Database.html#a38efc92beb0118c691946019de77c9ea">LineairDB::Database::CallbackType</a> =  std::function&lt;void(const <a class="el" href="namespaceLineairDB.html#a4f1bbaf1231308bbcb015d600f21a881">TxStatus</a>)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2bc7a5c80f83314de97efd25a59409a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bc7a5c80f83314de97efd25a59409a0">&#9670;&nbsp;</a></span>ProcedureType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classLineairDB_1_1Database.html#a2bc7a5c80f83314de97efd25a59409a0">LineairDB::Database::ProcedureType</a> =  std::function&lt;void(<a class="el" href="classLineairDB_1_1Transaction.html">Transaction</a>&amp;)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af5b85283761f6a9d34870f0615f16c82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5b85283761f6a9d34870f0615f16c82">&#9670;&nbsp;</a></span>Database() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LineairDB::Database::Database </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a new <a class="el" href="classLineairDB_1_1Database.html">Database</a> object. Thread-safe. Note that a default-constructed <a class="el" href="structLineairDB_1_1Config.html" title="Configuration and options for LineairDB instances. ">Config</a> object will be passed. </p>

</div>
</div>
<a id="ab7e29bead61d159e6bc7719f4ad8d886"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7e29bead61d159e6bc7719f4ad8d886">&#9670;&nbsp;</a></span>Database() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LineairDB::Database::Database </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structLineairDB_1_1Config.html">Config</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a new <a class="el" href="classLineairDB_1_1Database.html">Database</a> object. Thread-safe. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>See <a class="el" href="structLineairDB_1_1Config.html" title="Configuration and options for LineairDB instances. ">Config</a> for more details of configuration. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4f2b5961597dbbbf87f6454254fb9581"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f2b5961597dbbbf87f6454254fb9581">&#9670;&nbsp;</a></span>~Database()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LineairDB::Database::~Database </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a336be005045caa9896820560f7109df0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a336be005045caa9896820560f7109df0">&#9670;&nbsp;</a></span>Database() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LineairDB::Database::Database </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classLineairDB_1_1Database.html">Database</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a03fb644108b1ab1631aeaaf72172bad1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03fb644108b1ab1631aeaaf72172bad1">&#9670;&nbsp;</a></span>Database() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LineairDB::Database::Database </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classLineairDB_1_1Database.html">Database</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="afdd2606ae46302941e64f1cb083f5747"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdd2606ae46302941e64f1cb083f5747">&#9670;&nbsp;</a></span>BeginTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLineairDB_1_1Transaction.html">Transaction</a>&amp; LineairDB::Database::BeginTransaction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new transaction. Via this interface, the callee thread of this method can manipulate <a class="el" href="namespaceLineairDB.html">LineairDB</a>'s key-value storage directly. Note that the behavior and performance characteristics will affect from the selected callback manager and log manager; For example, if you have set Config::CallbackManager to ThreadLocal, the callee thread of this method may have to call Database::RequestCommit more frequently, in order to resolve the congestion of the thread-local commit callback queue. </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classLineairDB_1_1Transaction.html" title="We adopt &quot;the page model&quot; [Vossen95] as the model of transaction processing. For each transaction...">Transaction</a> </dd></dl>

</div>
</div>
<a id="a3090d3016716a1f1def8357ca7dd94d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3090d3016716a1f1def8357ca7dd94d8">&#9670;&nbsp;</a></span>EndTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool LineairDB::Database::EndTransaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classLineairDB_1_1Transaction.html">Transaction</a> &amp;&#160;</td>
          <td class="paramname"><em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLineairDB_1_1Database.html#a38efc92beb0118c691946019de77c9ea">CallbackType</a>&#160;</td>
          <td class="paramname"><em>clbk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Terminates the transaction. If <a class="el" href="classLineairDB_1_1Transaction.html#a85c9aa49f58d72bcbc13d4a1ea9e3a38" title="Abort this transaction manually. ">Transaction::Abort</a> has not been called, <a class="el" href="namespaceLineairDB.html">LineairDB</a> tries to commit <code>tx</code>. </p>
<dl class="section pre"><dt>Precondition</dt><dd>To achieve user abort, <a class="el" href="classLineairDB_1_1Transaction.html#a85c9aa49f58d72bcbc13d4a1ea9e3a38" title="Abort this transaction manually. ">Transaction::Abort</a> must be called before this method. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The first argument <code>tx</code> might have been deleted. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tx</td><td>A transaction wants to terminate. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">clbk</td><td>A callback function accepts a result (Committed or </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the <a class="el" href="namespaceLineairDB.html">LineairDB</a>'s concurrency control protocol <b>decides</b> to commit the given <code>tx</code>. Note that it does not mean that <code>tx has been committed</code>; <code>tx</code> will be committed if it goes without crash, disaster, or something accident, however, the commit cannot be determined until recoverability is guaranteed by persistent logs. Use clbk to find out whether you have really committed or not. </dd>
<dd>
false if the <a class="el" href="namespaceLineairDB.html">LineairDB</a>'s concurrency control protocol decides to abort the given <code>tx</code>. In contrast with the true case, this result will not be overturned. </dd></dl>

</div>
</div>
<a id="af5f105cc3014c7e5b5e2ec5a1815d536"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5f105cc3014c7e5b5e2ec5a1815d536">&#9670;&nbsp;</a></span>ExecuteTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LineairDB::Database::ExecuteTransaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classLineairDB_1_1Database.html#a2bc7a5c80f83314de97efd25a59409a0">ProcedureType</a>&#160;</td>
          <td class="paramname"><em>proc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLineairDB_1_1Database.html#a38efc92beb0118c691946019de77c9ea">CallbackType</a>&#160;</td>
          <td class="paramname"><em>commit_clbk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::optional&lt; <a class="el" href="classLineairDB_1_1Database.html#a38efc92beb0118c691946019de77c9ea">CallbackType</a> &gt;&#160;</td>
          <td class="paramname"><em>precommit_clbk</em> = <code>std::nullopt</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes a transaction given by a transaction procedure proc, and afterwards process callback function with the resulting TxStatus. It enqueues these two functions into <a class="el" href="namespaceLineairDB.html">LineairDB</a>'s thread pool. Thread-safe. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">proc</td><td>A transaction procedure processed by <a class="el" href="namespaceLineairDB.html">LineairDB</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">commit_clbk</td><td>A callback function accepts a result (Committed or Aborted) of this transaction. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">precommit_clbk</td><td>A callback function accepts a result (Precommitted or Aborted) of this transaction. Note that pre-committed transactions have not been committed. Since the recovery log has not been persisted, this transaction may be aborted. The callback is good for describing transaction dependencies. If a transaction is aborted, it is guaranteed that the other transactions, that are executed after checking the pre-commit of the transaction, will abort. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad41349e9df9ad939de6d77e7b69dc469"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad41349e9df9ad939de6d77e7b69dc469">&#9670;&nbsp;</a></span>Fence()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LineairDB::Database::Fence </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classLineairDB_1_1Database.html#ad41349e9df9ad939de6d77e7b69dc469" title="Fence() waits termination of transactions which is currently in progress. You can execute transaction...">Fence()</a> waits termination of transactions which is currently in progress. You can execute transactions in the order you want by interleaving <a class="el" href="classLineairDB_1_1Database.html#ad41349e9df9ad939de6d77e7b69dc469" title="Fence() waits termination of transactions which is currently in progress. You can execute transaction...">Fence()</a> between ExecuteTransaction functions. Note that no <a class="el" href="classLineairDB_1_1Database.html#ad41349e9df9ad939de6d77e7b69dc469" title="Fence() waits termination of transactions which is currently in progress. You can execute transaction...">Fence()</a> call may result in a execution sequence which is not same as the program (invoking) order of the ExecuteTransaction functions. If you know some dependency of transactions (e.g., database population), use this method to order them. Thread-safe. </p>

</div>
</div>
<a id="abd848da7f5cef8d50105ef380d4bac6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd848da7f5cef8d50105ef380d4bac6d">&#9670;&nbsp;</a></span>GetConfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structLineairDB_1_1Config.html">Config</a> LineairDB::Database::GetConfig </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the <a class="el" href="structLineairDB_1_1Config.html" title="Configuration and options for LineairDB instances. ">Config</a> object set by constructor. </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structLineairDB_1_1Config.html" title="Configuration and options for LineairDB instances. ">Config</a> object. Note that it is not an lvalue reference and you cannot change the configuration with it. Thread-safe. </dd></dl>

</div>
</div>
<a id="a3efa30ddbfacfd33270d483072b19acc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3efa30ddbfacfd33270d483072b19acc">&#9670;&nbsp;</a></span>operator=() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLineairDB_1_1Database.html">Database</a>&amp; LineairDB::Database::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classLineairDB_1_1Database.html">Database</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afc96bcc93a7c68b30784e36e9aa4198d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc96bcc93a7c68b30784e36e9aa4198d">&#9670;&nbsp;</a></span>operator=() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLineairDB_1_1Database.html">Database</a>&amp; LineairDB::Database::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classLineairDB_1_1Database.html">Database</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aad71b1f7a86e96639030d37fed9b7695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad71b1f7a86e96639030d37fed9b7695">&#9670;&nbsp;</a></span>RequestCallbacks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LineairDB::Database::RequestCallbacks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Requests executions of callback functions of already completed (committed or (aborted) transactions. Note that <a class="el" href="namespaceLineairDB.html">LineairDB</a>'s callback queues may be overloading in some combination of configurations (e.g., too long epoch size, too small thread-pool size, or weird implementation of the selected CallbackManager). </p>

</div>
</div>
<a id="abff04164aad657e2b72100885d699e38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abff04164aad657e2b72100885d699e38">&#9670;&nbsp;</a></span>WaitForCheckpoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LineairDB::Database::WaitForCheckpoint </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>WaitForCheckpoint Waits for the completion of the next checkpoint. Note that this method may take longer than the time specified in <code><a class="el" href="structLineairDB_1_1Config.html#a9dc0559305ed0a5d88d26367f1239809" title="It uses as the interval time (seconds) for checkpointing. The longer is the better for the performanc...">LineairDB::Config.checkpoint_period</a> (default value: 30 seconds)</code> in the worst cases. When the WAL (logging) is disabled and durability is guaranteed by only checkpointing, this interface is preferable; it ensures that the currently active transactions are durable. </p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a49982aa325e19f0956d42fde9132caa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49982aa325e19f0956d42fde9132caa2">&#9670;&nbsp;</a></span>Transaction</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classLineairDB_1_1Transaction.html">Transaction</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/lineairdb/<a class="el" href="database_8h_source.html">database.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceLineairDB.html">LineairDB</a></li><li class="navelem"><a class="el" href="classLineairDB_1_1Database.html">Database</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
